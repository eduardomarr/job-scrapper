# ğŸ¯ Job Monitor

Sistema automatizado para monitorar vagas de emprego em sites de carreiras e receber notificaÃ§Ãµes quando novas oportunidades surgirem.

## ğŸ“‹ Funcionalidades

- âœ… Monitora mÃºltiplos sites de vagas simultaneamente
- ğŸ” Filtra vagas por palavras-chave configurÃ¡veis
- ğŸ“§ Envia notificaÃ§Ãµes por email
- â° ExecuÃ§Ã£o automÃ¡tica via cron job (padrÃ£o: 1x por semana)
- ğŸš€ API REST para controle manual
- ğŸ“Š Suporte a diferentes tipos de sites de vagas
- ğŸ”§ FÃ¡cil de adicionar novos sites e keywords
- ğŸ”’ **Escrito em TypeScript** com tipagem completa

## ğŸ› ï¸ InstalaÃ§Ã£o

```bash
# Clone o repositÃ³rio ou crie a pasta do projeto
mkdir job-monitor
cd job-monitor

# Instale as dependÃªncias
npm install

# Configure as variÃ¡veis de ambiente
cp .env.example .env
# Edite o arquivo .env com suas configuraÃ§Ãµes

# Build do projeto TypeScript
npm run build
```

## âš™ï¸ ConfiguraÃ§Ã£o

### 1. VariÃ¡veis de Ambiente (.env)

```env
PORT=3000
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=seu-email@gmail.com
EMAIL_PASS=sua-senha-de-app
EMAIL_TO=destinatario@email.com
CRON_SCHEDULE=0 9 * * 1  # Segunda Ã s 9h
```

**Para Gmail:** Gere uma senha de app em https://myaccount.google.com/apppasswords

### 2. Adicionar Sites para Monitorar

Edite `src/config/jobSites.ts`:

```typescript
export const jobSites: JobSite[] = [
  {
    name: "Sua Empresa",
    url: "https://empresa.com/carreiras",
    type: "custom", // usa scraper genÃ©rico
  },
];
```

### 3. Configurar Palavras-chave

Edite `src/config/jobSites.ts`:

```typescript
export const keywords: string[] = [
  "frontend",
  "front-end",
  "react",
  "vue",
  "angular",
  "javascript",
  "typescript",
];
```

## ğŸš€ Uso

### Build do projeto

```bash
npm run build
```

### Iniciar o servidor (produÃ§Ã£o)

```bash
npm start
```

### Desenvolvimento (com auto-reload e sem build)

```bash
npm run dev
```

### Testar verificaÃ§Ã£o manualmente

```bash
npm run check
```

### Type checking (sem compilar)

```bash
npm run type-check
```

## ğŸ“¡ API Endpoints

### GET /

Health check do serviÃ§o

### GET /config

Retorna a configuraÃ§Ã£o atual (sites, keywords, cron)

### POST /check-now

Dispara uma verificaÃ§Ã£o manual imediatamente

```bash
curl -X POST http://localhost:3000/check-now
```

## ğŸ“… ConfiguraÃ§Ã£o do Cron

O formato do cron segue o padrÃ£o Unix:

```
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ segundo (opcional)
 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ minuto (0 - 59)
 â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ hora (0 - 23)
 â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€ dia do mÃªs (1 - 31)
 â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€ mÃªs (1 - 12)
 â”‚ â”‚ â”‚ â”‚ â”‚ â”Œâ”€â”€â”€â”€ dia da semana (0 - 7)
 â”‚ â”‚ â”‚ â”‚ â”‚ â”‚
 * * * * * *
```

Exemplos:

- `0 9 * * 1` - Segunda-feira Ã s 9h
- `0 9 * * 1-5` - Segunda a sexta Ã s 9h
- `0 */6 * * *` - A cada 6 horas
- `0 9,15 * * *` - Ã€s 9h e 15h todos os dias

## ğŸ—ï¸ Estrutura do Projeto

```
job-monitor/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts              # DefiniÃ§Ãµes de tipos TypeScript
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ jobSites.ts           # ConfiguraÃ§Ã£o de sites e keywords
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ scraper.ts            # Web scraping
â”‚   â”‚   â”œâ”€â”€ jobFilter.ts          # Filtro de vagas
â”‚   â”‚   â””â”€â”€ notifier.ts           # NotificaÃ§Ãµes
â”‚   â”œâ”€â”€ jobs/
â”‚   â”‚   â””â”€â”€ checkJobs.ts          # Job principal
â”‚   â””â”€â”€ index.ts                  # Servidor Fastify
â”œâ”€â”€ dist/                          # CÃ³digo compilado (gerado)
â”œâ”€â”€ .env                           # VariÃ¡veis de ambiente
â”œâ”€â”€ tsconfig.json                  # ConfiguraÃ§Ã£o TypeScript
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸ”§ Adicionando Suporte a Novos Sites

1. Analise a estrutura HTML do site de vagas
2. Adicione o site em `src/config/jobSites.ts`
3. Se necessÃ¡rio, crie um scraper especÃ­fico em `src/services/scraper.ts`

Exemplo:

```typescript
async scrapeLinkedIn(url: string): Promise<Job[]> {
  const html = await this.fetchPage(url);
  const $ = cheerio.load(html);
  const jobs: Job[] = [];

  $('.job-card').each((i, elem) => {
    jobs.push({
      title: $(elem).find('.job-title').text().trim(),
      location: $(elem).find('.job-location').text().trim(),
      url: $(elem).find('a').attr('href') || '',
      site: url
    });
  });

  return jobs;
}
```

## ğŸ“§ NotificaÃ§Ãµes

O sistema suporta:

- âœ… Email (via Nodemailer)
- âœ… Console/Logs
- ğŸ”œ Slack (adicione conforme necessÃ¡rio)
- ğŸ”œ Telegram (adicione conforme necessÃ¡rio)
- ğŸ”œ Discord (adicione conforme necessÃ¡rio)

## ğŸ› Troubleshooting

### Email nÃ£o estÃ¡ sendo enviado

- Verifique se as credenciais estÃ£o corretas no `.env`
- Para Gmail, use uma senha de app, nÃ£o a senha normal
- Verifique se a autenticaÃ§Ã£o de 2 fatores estÃ¡ ativada

### Scraper nÃ£o encontra vagas

- Execute `npm run check` para ver os logs detalhados
- O HTML do site pode ter mudado - atualize os seletores
- Alguns sites podem bloquear scrapers - considere usar APIs oficiais

### Cron nÃ£o estÃ¡ executando

- Verifique o formato do `CRON_SCHEDULE` no `.env`
- Certifique-se de que o servidor estÃ¡ rodando continuamente

## ğŸ“ LicenÃ§a

MIT

## ğŸ¤ Contribuindo

Sinta-se livre para abrir issues e pull requests!
